<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>EmptyEpsilonScripts</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>EEScripts</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions </a></li>
<li><a href="#Sources">Sources </a></li>
<li><a href="#Predefined_Sources">Predefined Sources </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/action-comms.html">action-comms</a></li>
  <li><a href="../modules/action-gm.html">action-gm</a></li>
  <li><a href="../modules/action-main.html">action-main</a></li>
  <li><a href="../modules/action.html">action</a></li>
  <li><a href="../modules/cargo-menu.html">cargo-menu</a></li>
  <li><a href="../modules/cargo.html">cargo</a></li>
  <li><a href="../modules/classutil.html">classutil</a></li>
  <li><a href="../modules/crafting.html">crafting</a></li>
  <li><a href="../modules/debug.html">debug</a></li>
  <li><a href="../modules/drag.html">drag</a></li>
  <li><a href="../modules/ecs.html">ecs</a></li>
  <li><strong>exchange</strong></li>
  <li><a href="../modules/hook-sys.html">hook-sys</a></li>
  <li><a href="../modules/hook.html">hook</a></li>
  <li><a href="../modules/lang-lax.html">lang-lax</a></li>
  <li><a href="../modules/lang-strict.html">lang-strict</a></li>
  <li><a href="../modules/lang.html">lang</a></li>
  <li><a href="../modules/persistence_entity.html">persistence_entity</a></li>
  <li><a href="../modules/position.html">position</a></li>
  <li><a href="../modules/require.html">require</a></li>
  <li><a href="../modules/stdext.html">stdext</a></li>
  <li><a href="../modules/track.html">track</a></li>
  <li><a href="../modules/vector.html">vector</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/README.md.html">README</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>exchange</code></h1>
<p>Utilities for exchanging one set of resources for another.</p>
<p>


<p> Terminology:</p>

<ul>
    <li>A "source" is a kind of resource that might be exchanged, such as rep, coolant, or HVLI ammo. Each source has a key, such as <a href="../modules/exchange.html#rep">rep</a>, <a href="../modules/exchange.html#coolant">coolant</a>, or <a href="../modules/exchange.html#w_hvli">w_hvli</a>.</li>
    <li>A "resource list" is a table with source keys mapped to the data type for that source, e.g. <code>{rep = 5}</code> or <code>{w_hvli = 2, w_mine = 1}</code></li>
</ul>

<p> To define a source, see <a href="../modules/exchange.html#exchange.sources">exchange.sources</a>.
 Source definition format:</p>


<pre>
{
    <span class="comment">-- Format <code>data</code> as a string, with a multiplier <code>mult</code>
</span>    format = <span class="keyword">function</span>(data, mult) ... <span class="keyword">end</span>,

    <span class="comment">-- Return true if <code>data</code> can be taken from ship at least <code>mult</code> times
</span>    canTake = <span class="keyword">function</span>(ship, data, mult) ... <span class="keyword">end</span>,

    <span class="comment">-- Take <code>data</code> from <code>ship</code>, <code>mult</code> times.
</span>    <span class="comment">-- This function may assume that <code>canTake(ship, data, mult)</code> is true.
</span>    take = <span class="keyword">function</span>(ship, data, mult) ... <span class="keyword">end</span>,

    <span class="comment">-- Return true if <code>data</code> can be added to ship at least <code>mult</code> times
</span>    canAdd = <span class="keyword">function</span>(ship, data, mult) ... <span class="keyword">end</span>,

    <span class="comment">-- Add <code>data</code> to <code>ship</code>, <code>mult</code> times.
</span>    <span class="comment">-- This function may assume that <code>canAdd(ship, data, mult)</code> is true.
</span>    add = <span class="keyword">function</span>(ship, data, mult) ... <span class="keyword">end</span>,
}
</pre>

</p>


<h2><a href="#Functions">Functions </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#exchange.each">exchange.each (resources, fn)</a></td>
	<td class="summary">Do something for each entry in a resource list.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.formatString">exchange.formatString (resources, mult)</a></td>
	<td class="summary">Format a resource list in a human-readable format, as a string such as <code>&quot;3 energy, 5 HVLIs&quot;</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.format">exchange.format (resources, mult)</a></td>
	<td class="summary">Format a resource list in a human-readable format, as a table such as <code>{&quot;3 energy&quot;, &quot;5 HVLIs&quot;}</code>.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.canTake">exchange.canTake (ship, resources, mult)</a></td>
	<td class="summary">Check whether a ship could supply resources.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.take">exchange.take (ship, resources, mult)</a></td>
	<td class="summary">Take resources from a ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.tryTake">exchange.tryTake (ship, resources, mult)</a></td>
	<td class="summary">Attempt to take resources from a ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.canAdd">exchange.canAdd (ship, resources, mult)</a></td>
	<td class="summary">Check whether a ship could accept resources.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.add">exchange.add (ship, resources, mult)</a></td>
	<td class="summary">Add resources to a ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.tryAdd">exchange.tryAdd (ship, resources, mult)</a></td>
	<td class="summary">Attempt to add resources to a ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.canSwap">exchange.canSwap (ship, from, to, mult)</a></td>
	<td class="summary">Check whether a ship could swap one set of resources for another.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.swap">exchange.swap (ship, from, to, mult)</a></td>
	<td class="summary">Swap resources on a ship.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exchange.trySwap">exchange.trySwap (ship, from, to, mult)</a></td>
	<td class="summary">Attempt to swap resources on a ship.</td>
	</tr>
</table>
<h2><a href="#Sources">Sources </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#exchange.sources">exchange.sources</a></td>
	<td class="summary">Mapping of source key => source.</td>
	</tr>
</table>
<h2><a href="#Predefined_Sources">Predefined Sources </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#custom">custom</a></td>
	<td class="summary">Forwards method calls to its data.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#rep">rep</a></td>
	<td class="summary">Faction reputation points.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#energy">energy</a></td>
	<td class="summary">Ship energy.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#hull">hull</a></td>
	<td class="summary">Ship hull points.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#coolant">coolant</a></td>
	<td class="summary">Ship coolant.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#probe">probe</a></td>
	<td class="summary">Ship scan probes.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#w_hvli">w_hvli</a></td>
	<td class="summary">HVLI ammunition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#w_homing">w_homing</a></td>
	<td class="summary">Homing ammunition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#w_mine">w_mine</a></td>
	<td class="summary">Mine ammunition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#w_emp">w_emp</a></td>
	<td class="summary">EMP ammunition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#w_nuke">w_nuke</a></td>
	<td class="summary">Nuke ammunition.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cargo">cargo</a></td>
	<td class="summary">Ship <a href="../modules/cargo.html#">cargo</a>.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions </h2>

    <dl class="function">
    <dt>
    <a name = "exchange.each"></a>
    <strong>exchange.each (resources, fn)</strong>
    </dt>
    <dd>
    Do something for each entry in a resource list.  Primarily intended for internal use. <br/>
 If the provided function returns a non-nil first result for any entry, the iteration is terminated and the results of that call are returned from this function.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resources</span>
         The resource list to iterate.
        </li>
        <li><span class="parameter">fn</span>
         A <code>function(source, data)</code> to call for each entry.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The results of the first call of <code>fn</code> that returned a non-nil first result, or nil if no call had a non-nil first result.
    </ol>




</dd>
    <dt>
    <a name = "exchange.formatString"></a>
    <strong>exchange.formatString (resources, mult)</strong>
    </dt>
    <dd>
    Format a resource list in a human-readable format, as a string such as <code>&quot;3 energy, 5 HVLIs&quot;</code>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resources</span>
         The resource list to format.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exchange.format"></a>
    <strong>exchange.format (resources, mult)</strong>
    </dt>
    <dd>
    Format a resource list in a human-readable format, as a table such as <code>{&quot;3 energy&quot;, &quot;5 HVLIs&quot;}</code>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">resources</span>
         The resource list to format.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exchange.canTake"></a>
    <strong>exchange.canTake (ship, resources, mult)</strong>
    </dt>
    <dd>
    Check whether a ship could supply resources.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to check.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to check.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the ship could provide the resources; otherwise false
    </ol>




</dd>
    <dt>
    <a name = "exchange.take"></a>
    <strong>exchange.take (ship, resources, mult)</strong>
    </dt>
    <dd>
    Take resources from a ship.
 The behaviour of this function is undefined if <a href="../modules/exchange.html#exchange.canTake">exchange.canTake</a> would return false given the same arguments.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to take from.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to take.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exchange.tryTake"></a>
    <strong>exchange.tryTake (ship, resources, mult)</strong>
    </dt>
    <dd>
    Attempt to take resources from a ship.  This operation is atomic; if any resources cannot be taken, then no resources are taken.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to take from.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to take.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the resources were successfully taken; otherwise false
    </ol>




</dd>
    <dt>
    <a name = "exchange.canAdd"></a>
    <strong>exchange.canAdd (ship, resources, mult)</strong>
    </dt>
    <dd>
    Check whether a ship could accept resources.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to check.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to check.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the ship could accept the resources; otherwise false
    </ol>




</dd>
    <dt>
    <a name = "exchange.add"></a>
    <strong>exchange.add (ship, resources, mult)</strong>
    </dt>
    <dd>
    Add resources to a ship.
 The behaviour of this function is undefined if <a href="../modules/exchange.html#exchange.canAdd">exchange.canAdd</a> would return false given the same arguments.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to add to.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to add.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exchange.tryAdd"></a>
    <strong>exchange.tryAdd (ship, resources, mult)</strong>
    </dt>
    <dd>
    Attempt to add resources to a ship.  This operation is atomic; if any resources cannot be added, then no resources are added.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to add to.
        </li>
        <li><span class="parameter">resources</span>
         The resource list to add.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in the resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the resources were successfully added; otherwise false
    </ol>




</dd>
    <dt>
    <a name = "exchange.canSwap"></a>
    <strong>exchange.canSwap (ship, from, to, mult)</strong>
    </dt>
    <dd>
    Check whether a ship could swap one set of resources for another.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to check.
        </li>
        <li><span class="parameter">from</span>
         The resource list to swap from.
        </li>
        <li><span class="parameter">to</span>
         The resource list to swap to.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in each resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the ship could swap the resources; otherwise false
    </ol>




</dd>
    <dt>
    <a name = "exchange.swap"></a>
    <strong>exchange.swap (ship, from, to, mult)</strong>
    </dt>
    <dd>
    Swap resources on a ship.
 The behaviour of this function is undefined if <a href="../modules/exchange.html#exchange.canSwap">exchange.canSwap</a> would return false given the same arguments.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to swap on.
        </li>
        <li><span class="parameter">from</span>
         The resource list to swap from.
        </li>
        <li><span class="parameter">to</span>
         The resource list to swap to.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in each resource list; default 1.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exchange.trySwap"></a>
    <strong>exchange.trySwap (ship, from, to, mult)</strong>
    </dt>
    <dd>
    Attempt to swap resources on a ship.  This operation is atomic; if any resources cannot be added or removed, then no resources are added or removed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ship</span>
         The ship to swap on.
        </li>
        <li><span class="parameter">from</span>
         The resource list to swap from.
        </li>
        <li><span class="parameter">to</span>
         The resource list to swap to.
        </li>
        <li><span class="parameter">mult</span>
         A multiplier to apply to each entry in each resource list; default 1.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        true if the resources were successfully added; otherwise false
    </ol>




</dd>
</dl>
    <h2 class="section-header "><a name="Sources"></a>Sources </h2>

    <dl class="function">
    <dt>
    <a name = "exchange.sources"></a>
    <strong>exchange.sources</strong>
    </dt>
    <dd>
    Mapping of source key => source.
 To register a new source, assign to <code>exchange.sources[key]</code> with a source definition.







</dd>
</dl>
    <h2 class="section-header "><a name="Predefined_Sources"></a>Predefined Sources </h2>

    <dl class="function">
    <dt>
    <a name = "custom"></a>
    <strong>custom</strong>
    </dt>
    <dd>
    Forwards method calls to its data.
 The data format for this source is similar to the source definition format, with the <code>data</code> parameter removed and with all functions made optional.


    <ul>
        <li><span class="parameter">format</span>
         <code>function(mult)</code>: Format this entry. If not present, omit this entry from the formatted list.
        </li>
        <li><span class="parameter">canTake</span>
         <code>function(ship, mult)</code>: Return true if the entry can be taken. If not present, treat as returned <code>true</code>.
        </li>
        <li><span class="parameter">take</span>
         <code>function(ship, mult)</code>: Take this entry. If not present, do nothing.
        </li>
        <li><span class="parameter">canAdd</span>
         <code>function(ship, mult)</code>: Return true if the entry can be added. If not present, treat as returned <code>true</code>.
        </li>
        <li><span class="parameter">add</span>
         <code>function(ship, mult)</code>: Add this entry. If not present, do nothing.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "rep"></a>
    <strong>rep</strong>
    </dt>
    <dd>
    Faction reputation points.  Data type: number.







</dd>
    <dt>
    <a name = "energy"></a>
    <strong>energy</strong>
    </dt>
    <dd>
    Ship energy.  Data type: number.







</dd>
    <dt>
    <a name = "hull"></a>
    <strong>hull</strong>
    </dt>
    <dd>
    Ship hull points.  Data type: number.







</dd>
    <dt>
    <a name = "coolant"></a>
    <strong>coolant</strong>
    </dt>
    <dd>
    Ship coolant.  Data type: number, where 1 represents 10% coolant.







</dd>
    <dt>
    <a name = "probe"></a>
    <strong>probe</strong>
    </dt>
    <dd>
    Ship scan probes.  Data type: integer.







</dd>
    <dt>
    <a name = "w_hvli"></a>
    <strong>w_hvli</strong>
    </dt>
    <dd>
    HVLI ammunition.  Data type: integer.







</dd>
    <dt>
    <a name = "w_homing"></a>
    <strong>w_homing</strong>
    </dt>
    <dd>
    Homing ammunition.  Data type: integer.







</dd>
    <dt>
    <a name = "w_mine"></a>
    <strong>w_mine</strong>
    </dt>
    <dd>
    Mine ammunition.  Data type: integer.







</dd>
    <dt>
    <a name = "w_emp"></a>
    <strong>w_emp</strong>
    </dt>
    <dd>
    EMP ammunition.  Data type: integer.







</dd>
    <dt>
    <a name = "w_nuke"></a>
    <strong>w_nuke</strong>
    </dt>
    <dd>
    Nuke ammunition.  Data type: integer.







</dd>
    <dt>
    <a name = "cargo"></a>
    <strong>cargo</strong>
    </dt>
    <dd>
    Ship <a href="../modules/cargo.html#">cargo</a>.  Requires <a href="../modules/cargo.html#">cargo</a> to function. Data type: cargo list.







</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
